<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <title>天気予報アプリ – ケーススタディ | 内山 雄大</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="OpenWeather API を用いた天気予報アプリのケーススタディ。要件定義・実装・品質改善・学びをまとめました。" />

  <!-- ページ専用 Canonical / OGP -->
  <link rel="canonical" href="https://yuuta5625.github.io/se-study/works/weather.html" />
<meta property="og:url" content="https://yuuta5625.github.io/se-study/works/weather.html">
<meta property="og:title" content="天気予報アプリ – ケーススタディ">
<meta property="og:description" content="OpenWeather API × Geolocation。ローディング/エラー表示など実務的配慮も解説。">
<meta property="og:type" content="article">
<meta property="og:image" content="https://yuuta5625.github.io/se-study/assets/ogp-weather.jpg">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta name="twitter:card" content="summary_large_image">

  <!-- ナビゲーションヒント -->
  <link rel="prev" href="./todo.html" />
  <link rel="next" href="../index.html#works" />

  <!-- 共有スタイル -->
  <link rel="stylesheet" href="../style.css?v=6" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

  <style>
    /* ===== Page-local styles (既存の命名を維持) ===== */
    :root { color-scheme: light dark; }
    .skip-link { position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden; }
    .skip-link:focus { position:static; width:auto; height:auto; padding:8px 12px; background:#000; color:#fff; border-radius:8px; }

    .cs-container { max-width: 960px; margin: 40px auto; padding: 0 20px; }
    .cs-crumbs { font-size: 14px; color: var(--muted); margin: 0 0 12px; }
    .cs-crumbs a { color: var(--accent); text-decoration: none; }
    .cs-hero { background: var(--card); border-radius: 16px; padding: 24px; box-shadow: 0 8px 24px rgba(0,0,0,.06); }
    .cs-hero h1 { margin: 0 0 6px; }
    .subtitle { color: var(--muted); margin: 6px 0 0; }
    .cs-meta { display:grid; grid-template-columns: repeat(auto-fit,minmax(180px,1fr)); gap:12px; margin-top:12px; }
    .cs-tag { font-size: 13px; background:#f4f6fb; border:1px solid #e6ebf5; padding:8px 10px; border-radius:10px; }

    .cs-layout { display:grid; grid-template-columns: 220px 1fr; gap:24px; margin-top:24px; }
    .toc { position:sticky; top:16px; align-self:start; background: var(--card); border-radius:12px; padding:12px; border:1px solid #ececec; }
    .toc h2 { font-size:14px; margin:0 0 8px; color: var(--muted); }
    .toc a { display:block; font-size:14px; padding:6px 4px; color: var(--text); text-decoration:none; }
    .toc a:hover, .toc a:focus { text-decoration:underline; }
    .cs-section { scroll-margin-top: 80px; margin-top: 0; background: var(--card); border-radius: 16px; padding: 20px; box-shadow: 0 8px 24px rgba(0,0,0,.05); }
    .cs-section + .cs-section { margin-top: 16px; }
    .cs-section h2 { margin: 0 0 12px; font-size: 22px; }
    .cs-grid-2 { display:grid; grid-template-columns: 1fr 1fr; gap:16px; }
    .cs-fig { border:1px solid #eee; border-radius:12px; overflow:hidden; background:#fff; }
    .cs-fig figcaption { font-size: 13px; color: var(--muted); padding: 8px 10px; background:#fafafa; }
    .cs-actions { display:flex; gap:12px; flex-wrap:wrap; margin-top: 12px; }
    .link-btn { display:inline-block; padding:10px 14px; border-radius:10px; background:var(--accent); color:#fff; text-decoration:none; }
    .cs-kpi { display:grid; grid-template-columns: repeat(auto-fit,minmax(160px,1fr)); gap:12px; }
    .cs-kpi .card { padding:14px; text-align:center; border:1px solid #ececec; border-radius:12px; background:var(--card); }

    .demo-frame { aspect-ratio: 16/9; background:#fff; overflow:hidden; border:1px solid #eee; border-radius:12px; }
    .demo-frame iframe { width:100%; height:100%; border:0; }

    @media (max-width: 900px){
      .cs-layout { grid-template-columns: 1fr; }
      .toc { position:relative; top:auto; }
      .cs-grid-2 { grid-template-columns: 1fr; }
    }
  </style>

  <!-- 構造化データ（SoftwareSourceCode + パンくず） -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"SoftwareSourceCode",
    "name":"天気予報アプリ",
    "description":"OpenWeather API を用いた天気予報アプリ。Geolocation/ローディング/エラー表示を実装。",
    "codeRepository":"https://github.com/yuuta5625/se-study/tree/main/weather-app",
    "programmingLanguage":"JavaScript",
    "runtimePlatform":"Web",
    "url":"https://yuuta5625.github.io/se-study/weather-app/",
    "author":{"@type":"Person","name":"内山 雄大","url":"https://yuuta5625.github.io/se-study/"},
    "dateCreated":"2025-09-01",
    "datePublished":"2025-09-01"
  }
  </script>
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"BreadcrumbList",
    "itemListElement":[
      {"@type":"ListItem","position":1,"name":"作品","item":"https://yuuta5625.github.io/se-study/index.html#works"},
      {"@type":"ListItem","position":2,"name":"天気予報アプリ"}
    ]
  }
  </script>
</head>
<body>
  <a class="skip-link" href="#main">メインへ移動</a>

  <header>
    <div class="header-container">
      <a class="site-title" href="../index.html#works" style="text-decoration:none">← 作品一覧へ</a>
      <nav id="global-nav"></nav>
    </div>
  </header>

  <main id="main" class="cs-container">
    <p class="cs-crumbs"><a href="../index.html#works">作品</a> / 天気予報アプリ</p>

    <section class="cs-hero" aria-labelledby="title">
      <h1 id="title">天気予報アプリ – ケーススタディ</h1>
      <p class="subtitle">現在地/都市名から天気を取得。API連携・エラーハンドリング・UI状態管理を実装。</p>
      <div class="cs-meta">
        <div class="cs-tag"><strong>役割</strong><br>個人開発（設計・実装・デザイン）</div>
        <div class="cs-tag"><strong>期間</strong><br>2025年9月（約2日）</div>
        <div class="cs-tag"><strong>技術</strong><br>HTML / CSS / JavaScript / OpenWeather API</div>
      </div>
      <div class="cs-actions">
        <a class="link-btn" href="../weather-app/index.html" target="_blank" rel="noopener">デモを見る</a>
        <a class="link-btn" href="https://github.com/yuuta5625/se-study/tree/main/weather-app" target="_blank" rel="noopener">GitHub</a>
      </div>
    </section>

    <div class="cs-layout">
      <!-- TOC -->
      <aside class="toc" aria-labelledby="toc-title">
        <h2 id="toc-title">目次</h2>
        <a href="#background">背景 / 目的</a>
        <a href="#goals">目標と評価指標</a>
        <a href="#implementation">実装ハイライト</a>
        <a href="#quality">品質・アクセシビリティ</a>
        <a href="#results">成果 / 学び</a>
      </aside>

      <div class="content">
        <section class="cs-section" id="background">
          <h2>背景 / 目的</h2>
          <ul>
            <li>フロント基礎（DOM/Fetch/非同期）の定着。</li>
            <li>ブラウザ機能（Geolocation）を活用した体験設計。</li>
            <li>学習用でも<strong>実務配慮（loading/error/レスポンシブ/A11y）</strong>を反映。</li>
          </ul>
        </section>

        <section class="cs-section" id="goals">
          <h2>目標と評価指標</h2>
          <div class="cs-kpi">
            <div class="card"><strong>成功基準</strong><br>都市/現在地の双方で取得成功</div>
            <div class="card"><strong>UX</strong><br>検索中/失敗/空の状態を明示</div>
            <div class="card"><strong>速度</strong><br>LCP 2.5s 以内（静的配信）</div>
            <div class="card"><strong>保守</strong><br>関数分離で再利用容易</div>
          </div>
        </section>

        <section class="cs-section" id="implementation">
          <h2>実装ハイライト</h2>
          <div class="cs-grid-2">
            <div>
              <ul>
                <li>地名→座標は <code>/geo/1.0/direct</code>、天気は <code>/data/2.5/weather</code>。</li>
                <li>現在地ボタン：Geolocation 許可→座標→天気表示。</li>
                <li>UI状態：<code>.loading</code> スピナー、<code>.error</code> アラート、空入力バリデーション。</li>
                <li>入力正規化：全角/連続スペースの吸収。</li>
                <li>連打対策：リクエスト番号で古いレスポンスを破棄。</li>
                <li>レスポンシブ：検索UIは縦並び、結果カードは中央揃え。</li>
              </ul>
            </div>
            <figure class="cs-fig demo-frame">
              <iframe
                src="../weather-app/index.html"
                title="天気予報アプリ デモ"
                loading="lazy"
                referrerpolicy="no-referrer-when-downgrade"
                allow="geolocation *; clipboard-read *; clipboard-write *">
              </iframe>
              <figcaption>埋め込みデモ（環境により現在地取得はブロックされる場合があります）</figcaption>
            </figure>
          </div>
          <div class="cs-actions">
            <a class="link-btn" href="../weather-app/index.html" target="_blank" rel="noopener">新しいタブで開く</a>
          </div>
        </section>

        <section class="cs-section" id="quality">
          <h2>品質・アクセシビリティ</h2>
          <ul>
            <li>読み込み・エラー・空状態を明確に表示。</li>
            <li>キーボード操作（Enterで検索、フォーカス可視）。</li>
            <li>代替テキスト・コントラスト・スクリーンリーダー配慮。</li>
            <li>HTTPS配信で Geolocation の要件を満たす。</li>
          </ul>
        </section>

        <section class="cs-section" id="results">
          <h2>成果 / 学び</h2>
          <ul>
            <li>ブラウザ機能と外部APIの連携フローを把握。</li>
            <li>失敗パターンの切り分け（権限拒否/ネットワーク/HTTPコード）。</li>
            <li>UI状態管理（loading/error/empty）の重要性を理解。</li>
          </ul>
          <p class="subtitle">次の改善候補：単位切替（°C/°F）、検索履歴、キャッシュ、i18n（ja/en）、ダークモード自動対応。</p>
        </section>
      </div>
    </div>
  </main>

  <footer>
    <p>© 2025 内山 雄大</p>
  </footer>

  <!-- 既存の main.js を読む（共通のJSがある場合） -->
  <script src="../main.js" defer></script>
</body>
</html>
